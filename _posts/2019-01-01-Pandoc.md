---
title: "Pandoc 学习笔记"
excerpt: ""
# classes: wide
categories:
-   Coding
tags:
-   pandoc
-   Latex
-   PDF
-   DOCX
create_at: 2020-05-01
last_modified_at: 2019-05-01
toc: true
toc_label: "文章提纲"
toc_icon: "book-reader"
toc_sticky: true
---

# 常见问题

## 安装

-   下载 [pandoc 软件](https://www.pandoc.org/)
    -   安装目录：`C:\Program Files\Pandoc`
        -   帮助文件：`Pandoc User's Guide.html`
-   查看 [pandoc 项目](https://github.com/jgm/pandoc)
-   了解 [pandoc 模板](https://github.com/jgm/pandoc-templates)
-   下载 [TexLive 软件](http://tug.org/texlive/)
    -   尽量安装完全版，避免使用过程中缺失宏包
-   下载 [Python 软件](https://www.python.org/)
    -   使用过滤器的时候才会用到，不是必须！

## 生成中文文档

### 生成 PDF

`pandoc test.md -o test.pdf --pdf-engine=xelatex -V mainfont=SimSun`

### 生成 Beamer 幻灯片

`pandoc test.md -o test.pdf -t beamer --pdf-engine=xelatex -V mainfont=SimSun`

### 生成 DOCX

`pandoc test.md -o test.docx`

### 生成 PPTX

`pandoc test.md -o test.pptx`

### 生成 HTML

`pandoc test.md -o test.html`

### 生成 LaTeX

`pandoc test.md -o test.tex`

-   `$公式$` 包裹的公式转换为 `\(公式\)`
-   `$$公式$$` 包裹的公式转换为 `\[公式\]`

### 生成「独立(standalone)」文档

生成 HTML 和 LaTeX 文档时，会发现只有文档的主体(body)部分，没有完整的文件头和尾。
如果需要生成完整的文档，可以增加 `-s` 在命令最后。

-   生成完整的 HTML：`pandoc test.md -o test.html -s`
-   生成完成的 LaTeX：`pandoc test.md -o test.tex -s`

注：灵活地应用这个功能，可以提高调试文档代码的效率。

### 从 WEB 上抓取内容生成文档

`pandoc -f html -t markdown -o web.md --request-header=User-Agent:"Mozilla/5.0" https://zhuyuanxiang.github.io/`

-   `-o`：指定输出文件，否则自动输出到 `stdout`
-   `--request-header=User-Agent:"Mozilla/5.0"`：发起 HTTP 请求时，设置的请求头；
-   `--request-header User-Agent:"Mozilla/5.0"`：与上面的意思相同，只是变量后面使用空格( )代替了等号(=)

### 支持代码高亮

`pandoc test.md -o test-yahei.pdf --pdf-engine=xelatex -V mainfont="Microsoft YaHei" --highlight-style=breezeDark`

-   '--highlight-style='_STYLE_\|_FILE_
    -   _STYLE_ ： `pygments`(默认)、`kate`, `monochrome`, `breezeDark`, `espresso`, `zenburn`, `haddock`, 和`tango`
    -   _FILE_ ： 以 JSON 为文件格式，以 `.theme` 为文件后缀，基于 KDE 语法解析。
        -   基于 pandoc 的默认模式生成自己的主题文件：`pandoc --print-highlight-style pygments > my.theme`
-   `--syntax-definition=`_FILE_
    -   一个 KDE XML 语法定义的文件，用于语法高亮代码块。可以被用于支持新的语言 或者 替代已经定义的语言。

## 编译调试

### 调试输出

`pandoc test.md -o test.pdf --pdf-engine=xelatex -V mainfont=SimSun --verbose`

给出详细的调试输出。这个仅对 PDF 输出时有效。

### 安静模式

`pandoc test.md -o test.pdf --pdf-engine=xelatex -V mainfont=SimSun --verbose --quiet`

安静模式。抑制所有的信息。

注：哪怕是打开调试输出，也不会产生任何信息。

### 快速退出

`pandoc test.md -o test.pdf --pdf-engine=xelatex -V mainfont=SimSun --fail-if-warnings`

遇到警告就退出转换过程。

### 生成日志(Log)文件

`pandoc test.md -o test.pdf --pdf-engine=xelatex -V mainfont=SimSun --log=log.json`

-   `verbosity=ERROR|WARNING|INFO`： 可以在 yaml 文件中定义

注：因为生成 PDF 的过程中，会遇到许多不可知问题，保存日志方便调试。

### 参考文献

pandoc 提供了三种方式：

-   脚注 ( footnote )
-   行内笔记 ( inline_notes )
-   参考文献 ( citations )
