---
title: "Python 学习关键点总结"
excerpt: "学习过程中发现自己不熟悉的知识点"
categories:
-   Coding
tags:
-   Python
-   Programming
create_at: 2019-02-27
last_modified_at: 2019-02-27
toc: true
toc_label: "文章提纲"
toc_icon: "book-reader"
toc_sticky: true
---

## Program

### with

1.  执行 contextor 以获取上下文管理器
2.  加载上下文管理器的 exit ( ) 方法以备稍后调用
3.  调用上下文管理器的 enter ( ) 方法
4.  如果有 as var 从句，则将 enter ( ) 方法的返回值赋给 var
5.  执行子代码块 with_body
6.  调用上下文管理器的 exit ( ) 方法，如果 with_body 的退出是由异常引发的，那么该异常的 type、value 和 traceback 会作为参数传给 exit ( )，否则传三个 None
7.  如果 with_body 的退出由异常引发，并且 exit ( ) 的返回值等于 False，那么这个异常将被重新引发一次；如果 exit ( ) 的返回值等于 True，那么这个异常就被无视掉，继续执行后面的代码

## Labels

### Create property

`@property`可以将 python 定义的函数「当做」属性访问，从而提供更加友好访问方式，但是有时候 setter/deleter 也是需要的。

-   只有@property 表示只读。
-   同时有@property 和`@x.setter`表示可读可写。
-   同时有@property 和`@x.setter`和`@x.deleter`表示可读可写可删除

## Error

### Memoery Error

原因：内存不够时，系统会报的错误，特别是处理大型数据集时，会面临这个问题

解决：

-   `numpy.zeros([rows_num, cols_num], dtype=np.bool)` : 使用 `bool` 可以使用更大的维度
-   `scipy.sparse.lil_matrix((rows_num,cols_num),dtype=)` : 使用稀疏矩阵可以使用比 `numpy` 的矩阵更大的维度，系统推荐 `lil_matrix()`
-   使用 64位的 Python + 扩大 Windows 的虚拟内存
    -   查看 Python 的版本
        -   在 Python Console 中，输入 `sys.version'
        -   在 Command 环境中，输入 `python`
        -   看到输出中有 `AMD64`，就表示安装的 Python 是 64 位的
    -   查看 Numpy 的版本，1.16.5 会出现第一次申请失败的问题
        -   建议升级到 1.18.1，当内存不够时，申请会报错，并且告诉你错误的原因
    -   扩大 Windows 虚拟内存，请参考 Windows 环境设置
        -   不能使用「自动管理所有驱动器的分页文件的大小」
        -   不能使用「系统管理的大小」
        -   在「自定义大小」中定义，我直接定义了「20G~40G」

## Formatter

### [pep8](https://pep8.org)

#### pep8 Args

max_line_length = 120
ignore = E501

#### pep8 Tools

-   [Autopep8](https://pypi.org/project/autopep8/): Autopep8 是比较宽松的格式化器，主要目的是修正代码中的错误，不太注意代码格式的统一。主要的格式化功能：重新缩进行、修复缩进、删除无关的空白、并重构常见错误（如 Bool 和 None 值）。文档中可以看到完整的更改列表。但是对于大部分格式都会默认正确，因此不太满足格式化工具的需要。
-   [Yapf](https://github.com/google/yapf): 是一个严格的格式化器，能够满足格式化的需要，是可以配置的。来自于 Google，但不是官方出品，其标准参考了：pep8、google、chromium 开发中使用的规范，解决了违反PEP 8规范的问题。重新格式化了没有违反PEP 8规范的代码。(推荐)
    -   需要安装 yapf Package 到 Python Interpreter
-   [Black](https://black.readthedocs.io/en/stable/): 与autopep8和Yapf类似，是一个严格的格式化器，但是不可配置。
-   三者的比较可以参考[Python code formatters comparison](http://blog.frank-mich.com/python-code-formatters-comparison-black-autopep8-and-yapf/)

### Yapf

#### Yapf Args

Yapf 是基于 pep8 的标准的，因此 pep8 的参数，也可以写进来，即 VSCode 的属性配置可以直接写入 pep8 的参数。

```json
[yapf]
based_on_style = pep8
max_line_length = 120
spaces_before_comment = 4
split_before_logical_operator = true
```
